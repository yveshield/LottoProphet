# 彩票预测系统更新日志

## 2025-03-25 更新内容

### 1. 添加期望值模型专用标签页

为了提升用户体验，我们将期望值模型功能从主预测界面中分离出来，创建了一个专门的标签页。这使得用户可以更方便地使用期望值模型进行预测。

* 添加了"期望值模型"标签页，现在位于标签列表的第二位
* 提供了独立的训练和预测按钮
* 添加了专用的日志显示区域和结果展示区

### 2. 增强期望值模型预测过程的可视化

为了帮助用户更好地理解期望值模型的工作原理，为预测过程添加了详细的计算步骤输出：

* 显示最近的开奖数据作为预测参考
* 展示红球和蓝球的概率分布（按概率从高到低排序）
* 详细展示期望值计算过程
* 输出每个号码的权重计算详情（基础概率、组合权重、最近性权重）
* 显示每一步选择号码的过程及其对应的权重值

### 3. 修复已知问题

* 修复了期望值模型预测过程中引用不存在的'日期'列导致的错误
* 更新了数据列名的引用，正确使用'期数'、'红球_1'等列名
* 解决了模型加载过程中的潜在问题，确保属性正确初始化

### 4. 期望值模型的技术优化

* 添加了`verbose`参数，允许控制日志输出的详细程度
* 实现了属性别名（`red_probs`和`blue_probs`），简化UI与模型的交互
* 优化了模型数据保存和加载过程，增强了错误处理
* 完善了训练和预测方法的文档字符串

### 5. 期望值模型的原理说明

添加了期望值模型的说明文本，向用户解释该模型：
* 基于历史数据统计和博弈论中的期望值概念
* 分析历史开奖模式、号码频率和组合特征
* 为每个可能的号码分配期望值
* 基于这些期望值生成预测结果

## 期望值模型的博弈论原理

在期望值模型的彩票预测中，博弈论的概念主要体现在以下几个方面：

1. **期望值策略**：博弈论中的期望值原理是一种决策方法，用于在不确定环境中选择最优策略。在彩票预测中，这意味着不是选择绝对概率最高的号码，而是选择"期望回报"最高的号码组合。

2. **风险与回报权衡**：博弈论强调在决策中平衡潜在收益和风险。模型实现了这一思想：
   ```
   期望值 = 号码概率 * 潜在回报 - (1 - 号码概率) * 投入成本
   ```
   这公式权衡了中奖可能性带来的收益与未中奖的损失。

3. **混合策略**：博弈论中的混合策略概念体现在模型使用温度参数引入随机性的方式上，确保不总是选择概率最高的号码，而是根据权重进行概率性选择。

4. **优势原则**：当模型分析不同号码组合的价值并赋予权重时，它遵循了博弈论中的优势原则，即舍弃劣势选择，保留优势选择。

5. **零和博弈概念**：彩票本质上是一种接近零和博弈的情境，模型试图在这种环境中找到最优策略。

博弈论的核心作用是提供了一个理论框架，使模型不仅关注"哪个号码最可能出现"，而是关注"选择哪个号码组合能带来最大期望收益"。这一微妙但重要的区别使得模型在号码选择上更加智能，考虑了概率、回报和风险的综合平衡。 